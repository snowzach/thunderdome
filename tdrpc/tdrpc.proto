syntax="proto3";
package tdrpc;

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "lnrpc/rpc.proto";

option go_package = "git.coinninja.net/backend/thunderdome/tdrpc";

service ThunderdomeRPC {

    rpc Login(LoginRequest) returns (User) {
        option (google.api.http) = {
            post: "/login"
            body: "*"
        };
    }

    rpc Balance(google.protobuf.Empty) returns (BalanceResponse) {
        option (google.api.http) = {
            get: "/balance"
        };
    }

    // DecodePayReq passthrough to lnrpc DevocePayReq function
    rpc DecodePayReq(lnrpc.PayReqString) returns (lnrpc.PayReq) {
        option (google.api.http) = {
            post: "/decode"
            body: "*"
        };
    }

    rpc AddInvoice(AddInvoiceRequest) returns (AddInvoiceResponse) {
        option (google.api.http) = {
            post: "/addinvoice"
            body: "*"
        };
    }

    rpc PayInvoice(PayInvoiceRequest) returns (PayInvoiceResponse) {
        option (google.api.http) = {
            post: "/payinvoice"
            body: "*"
        };
    }

    // rpc GetInfo(GetInfoRequest) returns (GetInfoResponse) {
    //     option (google.api.http) = {
    //         get: "/getinfo"
    //     };
    // }

    // rpc GetTxts(GetTxtsRequest) returns (GetTxtsResponse) {
    //     option (google.api.http) = {
    //         get: "/gettxs"
    //     };
    // }

    // rpc GetUserInvoices(GetUserInvoicesRequest) returns (GetUserInvoicesResponse) {
    //     option (google.api.http) = {
    //         get: "/getuserinvoices"
    //     };
    // }

    // rpc GetPending(GetPendingRequest) returns (GetPendingResponse) {
    //     option (google.api.http) = {
    //         get: "/getpending"
    //     };
    // }

    // rpc CheckRouteInvoice(CheckRouteInvoiceRequest) returns (CheckRouteInvoiceResponse) {
    //     option (google.api.http) = {
    //         get: "/checkrouteinvoice"
    //     };
    // }



}

message LoginRequest {
    string login = 1;
}

message User {
    string id = 1;
    string login = 2;
    string address = 3;
    int64 balance = 4;
}

message BalanceResponse {
    int64 balance = 1;
}

message DecodePayReqRequest {
    string pay_req = 1;
}

message AddInvoiceRequest {
    string memo = 1;
    int64 value = 2;
}

message AddInvoiceResponse {
    string pay_req = 1;
}

message PayInvoiceRequest {
    string invoice = 1;
    int64 value = 2;
}
message PayInvoiceResponse {
    string error = 1;
}


